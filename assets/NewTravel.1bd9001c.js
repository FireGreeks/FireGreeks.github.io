import{u as Rt,a as rt,b as jt,c as It,d as Bt,e as Pt,f as ct,g as bt,h as $t,i as wt,j as xt,k as vt,Q as Nt}from"./index.fc4b5c32.js";import{r as X,w as de,n as Me,z as Kt,c as h,m as Ge,a as zt,k as _t,l as v,ap as Qt,g as pe,al as ft,a5 as Re,K as st,aq as Lt,Z as ge,am as Ut,v as Zt,a7 as Ct,H as Wt,I as Jt,J as Xt,x as mt,ar as Gt,Y as pt,P as ht,S as ea,T as ot,_ as be,W as je,U as we,a1 as ta,V as aa}from"./index.f50984da.js";import{Q as na}from"./QToggle.1b3277de.js";import{q as he,c as qt,e as Dt}from"./format.e4e80033.js";import{t as la,a as gt,f as St,g as oa,j as ut,_ as Ne,d as Je}from"./date.258def40.js";import{T as ua}from"./TouchPan.54bc1161.js";import{Q as ia}from"./QPage.f8c8cd3d.js";import{u as ra}from"./use-quasar.7478be4c.js";import{u as sa,m as da}from"./index.0afad86d.js";import"./use-timeout.635dab6f.js";const yt={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},Xe={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Vt=Object.keys(Xe);Vt.forEach(e=>{Xe[e].regex=new RegExp(Xe[e].pattern)});const ca=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Vt.join("")+"])|(.)","g"),kt=/[.*+?^${}()|[\]\\]/g,ae=String.fromCharCode(1),va={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function fa(e,A,I,Q){let b,V,D,H,L,R;const $=X(null),O=X(w());function oe(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}de(()=>e.type+e.autogrow,N),de(()=>e.mask,d=>{if(d!==void 0)k(O.value,!0);else{const r=Z(O.value);N(),e.modelValue!==r&&A("update:modelValue",r)}}),de(()=>e.fillMask+e.reverseFillMask,()=>{$.value===!0&&k(O.value,!0)}),de(()=>e.unmaskedValue,()=>{$.value===!0&&k(O.value)});function w(){if(N(),$.value===!0){const d=x(Z(e.modelValue));return e.fillMask!==!1?p(d):d}return e.modelValue}function Y(d){if(d<b.length)return b.slice(-d);let r="",m=b;const s=m.indexOf(ae);if(s!==-1){for(let _=d-m.length;_>0;_--)r+=ae;m=m.slice(0,s)+r+m.slice(s)}return m}function N(){if($.value=e.mask!==void 0&&e.mask.length!==0&&oe(),$.value===!1){H=void 0,b="",V="";return}const d=yt[e.mask]===void 0?e.mask:yt[e.mask],r=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",m=r.replace(kt,"\\$&"),s=[],_=[],C=[];let E=e.reverseFillMask===!0,T="",q="";d.replace(ca,(K,u,z,se,ie)=>{if(se!==void 0){const J=Xe[se];C.push(J),q=J.negate,E===!0&&(_.push("(?:"+q+"+)?("+J.pattern+"+)?(?:"+q+"+)?("+J.pattern+"+)?"),E=!1),_.push("(?:"+q+"+)?("+J.pattern+")?")}else if(z!==void 0)T="\\"+(z==="\\"?"":z),C.push(z),s.push("([^"+T+"]+)?"+T+"?");else{const J=u!==void 0?u:ie;T=J==="\\"?"\\\\\\\\":J.replace(kt,"\\\\$&"),C.push(J),s.push("([^"+T+"]+)?"+T+"?")}});const ne=new RegExp("^"+s.join("")+"("+(T===""?".":"[^"+T+"]")+"+)?"+(T===""?"":"["+T+"]*")+"$"),re=_.length-1,B=_.map((K,u)=>u===0&&e.reverseFillMask===!0?new RegExp("^"+m+"*"+K):u===re?new RegExp("^"+K+"("+(q===""?".":q)+"+)?"+(e.reverseFillMask===!0?"$":m+"*")):new RegExp("^"+K));D=C,H=K=>{const u=ne.exec(e.reverseFillMask===!0?K:K.slice(0,C.length+1));u!==null&&(K=u.slice(1).join(""));const z=[],se=B.length;for(let ie=0,J=K;ie<se;ie++){const fe=B[ie].exec(J);if(fe===null)break;J=J.slice(fe.shift().length),z.push(...fe)}return z.length!==0?z.join(""):K},b=C.map(K=>typeof K=="string"?K:ae).join(""),V=b.split(ae).join(r)}function k(d,r,m){const s=Q.value,_=s.selectionEnd,C=s.value.length-_,E=Z(d);r===!0&&N();const T=x(E),q=e.fillMask!==!1?p(T):T,ne=O.value!==q;s.value!==q&&(s.value=q),ne===!0&&(O.value=q),document.activeElement===s&&Me(()=>{if(q===V){const B=e.reverseFillMask===!0?V.length:0;s.setSelectionRange(B,B,"forward");return}if(m==="insertFromPaste"&&e.reverseFillMask!==!0){const B=s.selectionEnd;let K=_-1;for(let u=L;u<=K&&u<B;u++)b[u]!==ae&&K++;G.right(s,K);return}if(["deleteContentBackward","deleteContentForward"].indexOf(m)!==-1){const B=e.reverseFillMask===!0?_===0?q.length>T.length?1:0:Math.max(0,q.length-(q===V?0:Math.min(T.length,C)+1))+1:_;s.setSelectionRange(B,B,"forward");return}if(e.reverseFillMask===!0)if(ne===!0){const B=Math.max(0,q.length-(q===V?0:Math.min(T.length,C+1)));B===1&&_===1?s.setSelectionRange(B,B,"forward"):G.rightReverse(s,B)}else{const B=q.length-C;s.setSelectionRange(B,B,"backward")}else if(ne===!0){const B=Math.max(0,b.indexOf(ae),Math.min(T.length,_)-1);G.right(s,B)}else{const B=_-1;G.right(s,B)}});const re=e.unmaskedValue===!0?Z(q):q;String(e.modelValue)!==re&&(e.modelValue!==null||re!=="")&&I(re,!0)}function ve(d,r,m){const s=x(Z(d.value));r=Math.max(0,b.indexOf(ae),Math.min(s.length,r)),L=r,d.setSelectionRange(r,m,"forward")}const G={left(d,r){const m=b.slice(r-1).indexOf(ae)===-1;let s=Math.max(0,r-1);for(;s>=0;s--)if(b[s]===ae){r=s,m===!0&&r++;break}if(s<0&&b[r]!==void 0&&b[r]!==ae)return G.right(d,0);r>=0&&d.setSelectionRange(r,r,"backward")},right(d,r){const m=d.value.length;let s=Math.min(m,r+1);for(;s<=m;s++)if(b[s]===ae){r=s;break}else b[s-1]===ae&&(r=s);if(s>m&&b[r-1]!==void 0&&b[r-1]!==ae)return G.left(d,m);d.setSelectionRange(r,r,"forward")},leftReverse(d,r){const m=Y(d.value.length);let s=Math.max(0,r-1);for(;s>=0;s--)if(m[s-1]===ae){r=s;break}else if(m[s]===ae&&(r=s,s===0))break;if(s<0&&m[r]!==void 0&&m[r]!==ae)return G.rightReverse(d,0);r>=0&&d.setSelectionRange(r,r,"backward")},rightReverse(d,r){const m=d.value.length,s=Y(m),_=s.slice(0,r+1).indexOf(ae)===-1;let C=Math.min(m,r+1);for(;C<=m;C++)if(s[C-1]===ae){r=C,r>0&&_===!0&&r--;break}if(C>m&&s[r-1]!==void 0&&s[r-1]!==ae)return G.leftReverse(d,m);d.setSelectionRange(r,r,"forward")}};function g(d){A("click",d),R=void 0}function o(d){if(A("keydown",d),Kt(d)===!0||d.altKey===!0)return;const r=Q.value,m=r.selectionStart,s=r.selectionEnd;if(d.shiftKey||(R=void 0),d.keyCode===37||d.keyCode===39){d.shiftKey&&R===void 0&&(R=r.selectionDirection==="forward"?m:s);const _=G[(d.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(d.preventDefault(),_(r,R===m?s:m),d.shiftKey){const C=r.selectionStart;r.setSelectionRange(Math.min(R,C),Math.max(R,C),"forward")}}else d.keyCode===8&&e.reverseFillMask!==!0&&m===s?(G.left(r,m),r.setSelectionRange(r.selectionStart,s,"backward")):d.keyCode===46&&e.reverseFillMask===!0&&m===s&&(G.rightReverse(r,s),r.setSelectionRange(m,r.selectionEnd,"forward"))}function x(d){if(d==null||d==="")return"";if(e.reverseFillMask===!0)return ue(d);const r=D;let m=0,s="";for(let _=0;_<r.length;_++){const C=d[m],E=r[_];if(typeof E=="string")s+=E,C===E&&m++;else if(C!==void 0&&E.regex.test(C))s+=E.transform!==void 0?E.transform(C):C,m++;else return s}return s}function ue(d){const r=D,m=b.indexOf(ae);let s=d.length-1,_="";for(let C=r.length-1;C>=0&&s!==-1;C--){const E=r[C];let T=d[s];if(typeof E=="string")_=E+_,T===E&&s--;else if(T!==void 0&&E.regex.test(T))do _=(E.transform!==void 0?E.transform(T):T)+_,s--,T=d[s];while(m===C&&T!==void 0&&E.regex.test(T));else return _}return _}function Z(d){return typeof d!="string"||H===void 0?typeof d=="number"?H(""+d):d:H(d)}function p(d){return V.length-d.length<=0?d:e.reverseFillMask===!0&&d.length!==0?V.slice(0,-d.length)+d:d+V.slice(d.length)}return{innerValue:O,hasMask:$,moveCursorForPaste:ve,updateMaskValue:k,onMaskedKeydown:o,onMaskedClick:g}}function ma(e,A){function I(){const Q=e.modelValue;try{const b="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(Q)===Q&&("length"in Q?Array.from(Q):[Q]).forEach(V=>{b.items.add(V)}),{files:b.files}}catch{return{files:void 0}}}return A===!0?h(()=>{if(e.type==="file")return I()}):h(I)}var ha=Ge({name:"QInput",inheritAttrs:!1,props:{...Rt,...va,...rt,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...jt,"paste","change","keydown","click","animationend"],setup(e,{emit:A,attrs:I}){const{proxy:Q}=pe(),{$q:b}=Q,V={};let D=NaN,H,L,R=null,$;const O=X(null),oe=It(e),{innerValue:w,hasMask:Y,moveCursorForPaste:N,updateMaskValue:k,onMaskedKeydown:ve,onMaskedClick:G}=fa(e,A,T,O),g=ma(e,!0),o=h(()=>ct(w.value)),x=$t(C),ue=Bt(),Z=h(()=>e.type==="textarea"||e.autogrow===!0),p=h(()=>Z.value===!0||["text","search","url","tel","password"].includes(e.type)),d=h(()=>{const u={...ue.splitAttrs.listeners.value,onInput:C,onPaste:_,onChange:ne,onBlur:re,onFocus:ft};return u.onCompositionstart=u.onCompositionupdate=u.onCompositionend=x,Y.value===!0&&(u.onKeydown=ve,u.onClick=G),e.autogrow===!0&&(u.onAnimationend=E),u}),r=h(()=>{const u={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:oe.value,...ue.splitAttrs.attributes.value,id:ue.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return Z.value===!1&&(u.type=e.type),e.autogrow===!0&&(u.rows=1),u});de(()=>e.type,()=>{O.value&&(O.value.value=e.modelValue)}),de(()=>e.modelValue,u=>{if(Y.value===!0){if(L===!0&&(L=!1,String(u)===D))return;k(u)}else w.value!==u&&(w.value=u,e.type==="number"&&V.hasOwnProperty("value")===!0&&(H===!0?H=!1:delete V.value));e.autogrow===!0&&Me(q)}),de(()=>e.autogrow,u=>{u===!0?Me(q):O.value!==null&&I.rows>0&&(O.value.style.height="auto")}),de(()=>e.dense,()=>{e.autogrow===!0&&Me(q)});function m(){bt(()=>{const u=document.activeElement;O.value!==null&&O.value!==u&&(u===null||u.id!==ue.targetUid.value)&&O.value.focus({preventScroll:!0})})}function s(){O.value!==null&&O.value.select()}function _(u){if(Y.value===!0&&e.reverseFillMask!==!0){const z=u.target;N(z,z.selectionStart,z.selectionEnd)}A("paste",u)}function C(u){if(!u||!u.target)return;if(e.type==="file"){A("update:modelValue",u.target.files);return}const z=u.target.value;if(u.target.qComposing===!0){V.value=z;return}if(Y.value===!0)k(z,!1,u.inputType);else if(T(z),p.value===!0&&u.target===document.activeElement){const{selectionStart:se,selectionEnd:ie}=u.target;se!==void 0&&ie!==void 0&&Me(()=>{u.target===document.activeElement&&z.indexOf(u.target.value)===0&&u.target.setSelectionRange(se,ie)})}e.autogrow===!0&&q()}function E(u){A("animationend",u),q()}function T(u,z){$=()=>{R=null,e.type!=="number"&&V.hasOwnProperty("value")===!0&&delete V.value,e.modelValue!==u&&D!==u&&(D=u,z===!0&&(L=!0),A("update:modelValue",u),Me(()=>{D===u&&(D=NaN)})),$=void 0},e.type==="number"&&(H=!0,V.value=u),e.debounce!==void 0?(R!==null&&clearTimeout(R),V.value=u,R=setTimeout($,e.debounce)):$()}function q(){requestAnimationFrame(()=>{const u=O.value;if(u!==null){const z=u.parentNode.style,{scrollTop:se}=u,{overflowY:ie,maxHeight:J}=b.platform.is.firefox===!0?{}:window.getComputedStyle(u),fe=ie!==void 0&&ie!=="scroll";fe===!0&&(u.style.overflowY="hidden"),z.marginBottom=u.scrollHeight-1+"px",u.style.height="1px",u.style.height=u.scrollHeight+"px",fe===!0&&(u.style.overflowY=parseInt(J,10)<u.scrollHeight?"auto":"hidden"),z.marginBottom="",u.scrollTop=se}})}function ne(u){x(u),R!==null&&(clearTimeout(R),R=null),$!==void 0&&$(),A("change",u.target.value)}function re(u){u!==void 0&&ft(u),R!==null&&(clearTimeout(R),R=null),$!==void 0&&$(),H=!1,L=!1,delete V.value,e.type!=="file"&&setTimeout(()=>{O.value!==null&&(O.value.value=w.value!==void 0?w.value:"")})}function B(){return V.hasOwnProperty("value")===!0?V.value:w.value!==void 0?w.value:""}zt(()=>{re()}),_t(()=>{e.autogrow===!0&&q()}),Object.assign(ue,{innerValue:w,fieldClass:h(()=>`q-${Z.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:h(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:O,emitValue:T,hasValue:o,floatingLabel:h(()=>o.value===!0&&(e.type!=="number"||isNaN(w.value)===!1)||ct(e.displayValue)),getControl:()=>v(Z.value===!0?"textarea":"input",{ref:O,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...r.value,...d.value,...e.type!=="file"?{value:B()}:g.value}),getShadowControl:()=>v("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(Z.value===!0?"":" text-no-wrap")},[v("span",{class:"invisible"},B()),v("span",e.shadowText)])});const K=Pt(ue);return Object.assign(Q,{focus:m,select:s,getNativeElement:()=>O.value}),Qt(Q,"nativeEl",()=>O.value),K}});function ga(){let e=Object.create(null);return{getCache:(A,I)=>e[A]===void 0?e[A]=typeof I=="function"?I():I:e[A],setCache(A,I){e[A]=I},hasCache(A){return e.hasOwnProperty(A)},clearCache(A){A!==void 0?delete e[A]:e={}}}}const ya=["gregorian","persian"],Ht={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>ya.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Tt=["update:modelValue"];function xe(e){return e.year+"/"+he(e.month)+"/"+he(e.day)}function Ft(e,A){const I=h(()=>e.disable!==!0&&e.readonly!==!0),Q=h(()=>I.value===!0?0:-1),b=h(()=>{const H=[];return e.color!==void 0&&H.push(`bg-${e.color}`),e.textColor!==void 0&&H.push(`text-${e.textColor}`),H.join(" ")});function V(){return e.locale!==void 0?{...A.lang.date,...e.locale}:A.lang.date}function D(H){const L=new Date,R=H===!0?null:0;if(e.calendar==="persian"){const $=la(L);return{year:$.jy,month:$.jm,day:$.jd}}return{year:L.getFullYear(),month:L.getMonth()+1,day:L.getDate(),hour:R,minute:R,second:R,millisecond:R}}return{editable:I,tabindex:Q,headerClass:b,getLocale:V,getCurrentDate:D}}const Ve=20,ka=["Calendar","Years","Months"],Mt=e=>ka.includes(e),it=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ee=" \u2014 ";function _e(e){return e.year+"/"+he(e.month)}var Ma=Ge({name:"QDate",props:{...Ht,...rt,...qt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:it},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:it},navigationMaxYearMonth:{type:String,validator:it},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Mt}},emits:[...Tt,"rangeStart","rangeEnd","navigation"],setup(e,{slots:A,emit:I}){const{proxy:Q}=pe(),{$q:b}=Q,V=Dt(e,b),{getCache:D}=ga(),{tabindex:H,headerClass:L,getLocale:R,getCurrentDate:$}=Ft(e,b);let O;const oe=wt(e),w=xt(oe),Y=X(null),N=X(Oe()),k=X(R()),ve=h(()=>Oe()),G=h(()=>R()),g=h(()=>$()),o=X(Ze(N.value,k.value)),x=X(e.defaultView),ue=b.lang.rtl===!0?"right":"left",Z=X(ue.value),p=X(ue.value),d=o.value.year,r=X(d-d%Ve-(d<0?Ve:0)),m=X(null),s=h(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(V.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),_=h(()=>e.color||"primary"),C=h(()=>e.textColor||"white"),E=h(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),T=h(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),q=h(()=>T.value.filter(t=>typeof t=="string").map(t=>Pe(t,N.value,k.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),ne=h(()=>{const t=a=>Pe(a,N.value,k.value);return T.value.filter(a=>Lt(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),re=h(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=gt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),B=h(()=>e.calendar==="persian"?xe:(t,a,n)=>St(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?N.value:a,n===void 0?k.value:n,t.year,t.timezoneOffset)),K=h(()=>q.value.length+ne.value.reduce((t,a)=>t+1+oa(re.value(a.to),re.value(a.from)),0)),u=h(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(m.value!==null){const n=m.value.init,c=re.value(n);return k.value.daysShort[c.getDay()]+", "+k.value.monthsShort[n.month-1]+" "+n.day+Ee+"?"}if(K.value===0)return Ee;if(K.value>1)return`${K.value} ${k.value.pluralDay}`;const t=q.value[0],a=re.value(t);return isNaN(a.valueOf())===!0?Ee:k.value.headerTitle!==void 0?k.value.headerTitle(a,t):k.value.daysShort[a.getDay()]+", "+k.value.monthsShort[t.month-1]+" "+t.day}),z=h(()=>q.value.concat(ne.value.map(a=>a.from)).sort((a,n)=>a.year-n.year||a.month-n.month)[0]),se=h(()=>q.value.concat(ne.value.map(a=>a.to)).sort((a,n)=>n.year-a.year||n.month-a.month)[0]),ie=h(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(K.value===0)return Ee;if(K.value>1){const t=z.value,a=se.value,n=k.value.monthsShort;return n[t.month-1]+(t.year!==a.year?" "+t.year+Ee+n[a.month-1]+" ":t.month!==a.month?Ee+n[a.month-1]:"")+" "+a.year}return q.value[0].year}),J=h(()=>{const t=[b.iconSet.datetime.arrowLeft,b.iconSet.datetime.arrowRight];return b.lang.rtl===!0?t.reverse():t}),fe=h(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):k.value.firstDayOfWeek),Ie=h(()=>{const t=k.value.daysShort,a=fe.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),ye=h(()=>{const t=o.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():ut(t.year,t.month)}),Ke=h(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),te=h(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),le=h(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Be=h(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return te.value!==null&&te.value.year>=o.value.year&&(t.year.prev=!1,te.value.year===o.value.year&&te.value.month>=o.value.month&&(t.month.prev=!1)),le.value!==null&&le.value.year<=o.value.year&&(t.year.next=!1,le.value.year===o.value.year&&le.value.month<=o.value.month&&(t.month.next=!1)),t}),He=h(()=>{const t={};return q.value.forEach(a=>{const n=_e(a);t[n]===void 0&&(t[n]=[]),t[n].push(a.day)}),t}),ze=h(()=>{const t={};return ne.value.forEach(a=>{const n=_e(a.from),c=_e(a.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:a.from.day,to:n===c?a.to.day:void 0,range:a}),n<c){let f;const{year:P,month:y}=a.from,F=y<12?{year:P,month:y+1}:{year:P+1,month:1};for(;(f=_e(F))<=c;)t[f]===void 0&&(t[f]=[]),t[f].push({from:void 0,to:f===c?a.to.day:void 0,range:a}),F.month++,F.month>12&&(F.year++,F.month=1)}}),t}),Ce=h(()=>{if(m.value===null)return;const{init:t,initHash:a,final:n,finalHash:c}=m.value,[f,P]=a<=c?[t,n]:[n,t],y=_e(f),F=_e(P);if(y!==ce.value&&F!==ce.value)return;const U={};return y===ce.value?(U.from=f.day,U.includeFrom=!0):U.from=1,F===ce.value?(U.to=P.day,U.includeTo=!0):U.to=ye.value,U}),ce=h(()=>_e(o.value)),et=h(()=>{const t={};if(e.options===void 0){for(let n=1;n<=ye.value;n++)t[n]=!0;return t}const a=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=ye.value;n++){const c=ce.value+"/"+he(n);t[n]=a(c)}return t}),tt=h(()=>{const t={};if(e.events===void 0)for(let a=1;a<=ye.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=ye.value;n++){const c=ce.value+"/"+he(n);t[n]=a(c)===!0&&Ke.value(c)}}return t}),Te=h(()=>{let t,a;const{year:n,month:c}=o.value;if(e.calendar!=="persian")t=new Date(n,c-1,1),a=new Date(n,c-1,0).getDate();else{const f=gt(n,c,1);t=new Date(f.gy,f.gm-1,f.gd);let P=c-1,y=n;P===0&&(P=12,y--),a=ut(y,P)}return{days:t.getDay()-fe.value-1,endDay:a}}),qe=h(()=>{const t=[],{days:a,endDay:n}=Te.value,c=a<0?a+7:a;if(c<6)for(let y=n-c;y<=n;y++)t.push({i:y,fill:!0});const f=t.length;for(let y=1;y<=ye.value;y++){const F={i:y,event:tt.value[y],classes:[]};et.value[y]===!0&&(F.in=!0,F.flat=!0),t.push(F)}if(He.value[ce.value]!==void 0&&He.value[ce.value].forEach(y=>{const F=f+y-1;Object.assign(t[F],{selected:!0,unelevated:!0,flat:!1,color:_.value,textColor:C.value})}),ze.value[ce.value]!==void 0&&ze.value[ce.value].forEach(y=>{if(y.from!==void 0){const F=f+y.from-1,U=f+(y.to||ye.value)-1;for(let $e=F;$e<=U;$e++)Object.assign(t[$e],{range:y.range,unelevated:!0,color:_.value,textColor:C.value});Object.assign(t[F],{rangeFrom:!0,flat:!1}),y.to!==void 0&&Object.assign(t[U],{rangeTo:!0,flat:!1})}else if(y.to!==void 0){const F=f+y.to-1;for(let U=f;U<=F;U++)Object.assign(t[U],{range:y.range,unelevated:!0,color:_.value,textColor:C.value});Object.assign(t[F],{flat:!1,rangeTo:!0})}else{const F=f+ye.value-1;for(let U=f;U<=F;U++)Object.assign(t[U],{range:y.range,unelevated:!0,color:_.value,textColor:C.value})}}),Ce.value!==void 0){const y=f+Ce.value.from-1,F=f+Ce.value.to-1;for(let U=y;U<=F;U++)t[U].color=_.value,t[U].editRange=!0;Ce.value.includeFrom===!0&&(t[y].editRangeFrom=!0),Ce.value.includeTo===!0&&(t[F].editRangeTo=!0)}o.value.year===g.value.year&&o.value.month===g.value.month&&(t[f+g.value.day-1].today=!0);const P=t.length%7;if(P>0){const y=7-P;for(let F=1;F<=y;F++)t.push({i:F,fill:!0})}return t.forEach(y=>{let F="q-date__calendar-item ";y.fill===!0?F+="q-date__calendar-item--fill":(F+=`q-date__calendar-item--${y.in===!0?"in":"out"}`,y.range!==void 0&&(F+=` q-date__range${y.rangeTo===!0?"-to":y.rangeFrom===!0?"-from":""}`),y.editRange===!0&&(F+=` q-date__edit-range${y.editRangeFrom===!0?"-from":""}${y.editRangeTo===!0?"-to":""}`),(y.range!==void 0||y.editRange===!0)&&(F+=` text-${y.color}`)),y.classes=F}),t}),Fe=h(()=>e.disable===!0?{"aria-disabled":"true"}:{});de(()=>e.modelValue,t=>{if(O===t)O=0;else{const a=Ze(N.value,k.value);ee(a.year,a.month,a)}}),de(x,()=>{Y.value!==null&&Q.$el.contains(document.activeElement)===!0&&Y.value.focus()}),de(()=>o.value.year+"|"+o.value.month,()=>{I("navigation",{year:o.value.year,month:o.value.month})}),de(ve,t=>{dt(t,k.value,"mask"),N.value=t}),de(G,t=>{dt(N.value,t,"locale"),k.value=t});function Qe(){const{year:t,month:a,day:n}=g.value,c={...o.value,year:t,month:a,day:n},f=He.value[_e(c)];(f===void 0||f.includes(c.day)===!1)&&at(c),De(c.year,c.month)}function Le(t){Mt(t)===!0&&(x.value=t)}function Ue(t,a){["month","year"].includes(t)&&(t==="month"?i:M)(a===!0?-1:1)}function De(t,a){x.value="Calendar",ee(t,a)}function Se(t,a){if(e.range===!1||!t){m.value=null;return}const n=Object.assign({...o.value},t),c=a!==void 0?Object.assign({...o.value},a):n;m.value={init:n,initHash:xe(n),final:c,finalHash:xe(c)},De(n.year,n.month)}function Oe(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Pe(t,a,n){return Ne(t,a,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Ze(t,a){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return l();const c=n[n.length-1],f=Pe(c.from!==void 0?c.from:c,t,a);return f.dateHash===null?l():f}function l(){let t,a;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),a=parseInt(n[1],10)}else{const n=g.value!==void 0?g.value:$();t=n.year,a=n.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+he(a)+"/01"}}function i(t){let a=o.value.year,n=Number(o.value.month)+t;n===13?(n=1,a++):n===0&&(n=12,a--),ee(a,n),E.value===!0&&Ye("month")}function M(t){const a=Number(o.value.year)+t;ee(a,o.value.month),E.value===!0&&Ye("year")}function j(t){ee(t,o.value.month),x.value=e.defaultView==="Years"?"Months":"Calendar",E.value===!0&&Ye("year")}function W(t){ee(o.value.year,t),x.value="Calendar",E.value===!0&&Ye("month")}function me(t,a){const n=He.value[a];(n!==void 0&&n.includes(t.day)===!0?nt:at)(t)}function S(t){return{year:t.year,month:t.month,day:t.day}}function ee(t,a,n){if(te.value!==null&&t<=te.value.year&&((a<te.value.month||t<te.value.year)&&(a=te.value.month),t=te.value.year),le.value!==null&&t>=le.value.year&&((a>le.value.month||t>le.value.year)&&(a=le.value.month),t=le.value.year),n!==void 0){const{hour:f,minute:P,second:y,millisecond:F,timezoneOffset:U,timeHash:$e}=n;Object.assign(o.value,{hour:f,minute:P,second:y,millisecond:F,timezoneOffset:U,timeHash:$e})}const c=t+"/"+he(a)+"/01";c!==o.value.dateHash&&(Z.value=o.value.dateHash<c==(b.lang.rtl!==!0)?"left":"right",t!==o.value.year&&(p.value=Z.value),Me(()=>{r.value=t-t%Ve-(t<0?Ve:0),Object.assign(o.value,{year:t,month:a,day:1,dateHash:c})}))}function ke(t,a,n){const c=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;O=c;const{reason:f,details:P}=We(a,n);I("update:modelValue",c,f,P)}function Ye(t){const a=q.value[0]!==void 0&&q.value[0].dateHash!==null?{...q.value[0]}:{...o.value};Me(()=>{a.year=o.value.year,a.month=o.value.month;const n=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():ut(a.year,a.month);a.day=Math.min(Math.max(1,a.day),n);const c=Ae(a);O=c;const{details:f}=We("",a);I("update:modelValue",c,t,f)})}function We(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...S(a.target),from:S(a.from),to:S(a.to)}}:{reason:`${t}-day`,details:S(a)}}function Ae(t,a,n){return t.from!==void 0?{from:B.value(t.from,a,n),to:B.value(t.to,a,n)}:B.value(t,a,n)}function at(t){let a;if(e.multiple===!0)if(t.from!==void 0){const n=xe(t.from),c=xe(t.to),f=q.value.filter(y=>y.dateHash<n||y.dateHash>c),P=ne.value.filter(({from:y,to:F})=>F.dateHash<n||y.dateHash>c);a=f.concat(P).concat(t).map(y=>Ae(y))}else{const n=T.value.slice();n.push(Ae(t)),a=n}else a=Ae(t);ke(a,"add",t)}function nt(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=Ae(t);t.from!==void 0?a=e.modelValue.filter(c=>c.from!==void 0?c.from!==n.from&&c.to!==n.to:!0):a=e.modelValue.filter(c=>c!==n),a.length===0&&(a=null)}ke(a,"remove",t)}function dt(t,a,n){const c=q.value.concat(ne.value).map(f=>Ae(f,t,a)).filter(f=>f.from!==void 0?f.from.dateHash!==null&&f.to.dateHash!==null:f.dateHash!==null);I("update:modelValue",(e.multiple===!0?c:c[0])||null,n)}function Ot(){if(e.minimal!==!0)return v("div",{class:"q-date__header "+L.value},[v("div",{class:"relative-position"},[v(Re,{name:"q-transition--fade"},()=>v("div",{key:"h-yr-"+ie.value,class:"q-date__header-subtitle q-date__header-link "+(x.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:H.value,...D("vY",{onClick(){x.value="Years"},onKeyup(t){t.keyCode===13&&(x.value="Years")}})},[ie.value]))]),v("div",{class:"q-date__header-title relative-position flex no-wrap"},[v("div",{class:"relative-position col"},[v(Re,{name:"q-transition--fade"},()=>v("div",{key:"h-sub"+u.value,class:"q-date__header-title-label q-date__header-link "+(x.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:H.value,...D("vC",{onClick(){x.value="Calendar"},onKeyup(t){t.keyCode===13&&(x.value="Calendar")}})},[u.value]))]),e.todayBtn===!0?v(ge,{class:"q-date__header-today self-start",icon:b.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:H.value,onClick:Qe}):null])])}function lt({label:t,type:a,key:n,dir:c,goTo:f,boundaries:P,cls:y}){return[v("div",{class:"row items-center q-date__arrow"},[v(ge,{round:!0,dense:!0,size:"sm",flat:!0,icon:J.value[0],tabindex:H.value,disable:P.prev===!1,...D("go-#"+a,{onClick(){f(-1)}})})]),v("div",{class:"relative-position overflow-hidden flex flex-center"+y},[v(Re,{name:"q-transition--jump-"+c},()=>v("div",{key:n},[v(ge,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:H.value,...D("view#"+a,{onClick:()=>{x.value=a}})})]))]),v("div",{class:"row items-center q-date__arrow"},[v(ge,{round:!0,dense:!0,size:"sm",flat:!0,icon:J.value[1],tabindex:H.value,disable:P.next===!1,...D("go+#"+a,{onClick(){f(1)}})})])]}const Yt={Calendar:()=>[v("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[v("div",{class:"q-date__navigation row items-center no-wrap"},lt({label:k.value.months[o.value.month-1],type:"Months",key:o.value.month,dir:Z.value,goTo:i,boundaries:Be.value.month,cls:" col"}).concat(lt({label:o.value.year,type:"Years",key:o.value.year,dir:p.value,goTo:M,boundaries:Be.value.year,cls:""}))),v("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Ie.value.map(t=>v("div",{class:"q-date__calendar-item"},[v("div",t)]))),v("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[v(Re,{name:"q-transition--slide-"+Z.value},()=>v("div",{key:ce.value,class:"q-date__calendar-days fit"},qe.value.map(t=>v("div",{class:t.classes},[t.in===!0?v(ge,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:H.value,...D("day#"+t.i,{onClick:()=>{At(t.i)},onMouseover:()=>{Et(t.i)}})},t.event!==!1?()=>v("div",{class:"q-date__event bg-"+t.event}):null):v("div",""+t.i)]))))])])],Months(){const t=o.value.year===g.value.year,a=c=>te.value!==null&&o.value.year===te.value.year&&te.value.month>c||le.value!==null&&o.value.year===le.value.year&&le.value.month<c,n=k.value.monthsShort.map((c,f)=>{const P=o.value.month===f+1;return v("div",{class:"q-date__months-item flex flex-center"},[v(ge,{class:t===!0&&g.value.month===f+1?"q-date__today":null,flat:P!==!0,label:c,unelevated:P,color:P===!0?_.value:null,textColor:P===!0?C.value:null,tabindex:H.value,disable:a(f+1),...D("month#"+f,{onClick:()=>{W(f+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(v("div",{class:"row no-wrap full-width"},[lt({label:o.value.year,type:"Years",key:o.value.year,dir:p.value,goTo:M,boundaries:Be.value.year,cls:" col"})])),v("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=r.value,a=t+Ve,n=[],c=f=>te.value!==null&&te.value.year>f||le.value!==null&&le.value.year<f;for(let f=t;f<=a;f++){const P=o.value.year===f;n.push(v("div",{class:"q-date__years-item flex flex-center"},[v(ge,{key:"yr"+f,class:g.value.year===f?"q-date__today":null,flat:!P,label:f,dense:!0,unelevated:P,color:P===!0?_.value:null,textColor:P===!0?C.value:null,tabindex:H.value,disable:c(f),...D("yr#"+f,{onClick:()=>{j(f)}})})]))}return v("div",{class:"q-date__view q-date__years flex flex-center"},[v("div",{class:"col-auto"},[v(ge,{round:!0,dense:!0,flat:!0,icon:J.value[0],tabindex:H.value,disable:c(t),...D("y-",{onClick:()=>{r.value-=Ve}})})]),v("div",{class:"q-date__years-content col self-stretch row items-center"},n),v("div",{class:"col-auto"},[v(ge,{round:!0,dense:!0,flat:!0,icon:J.value[1],tabindex:H.value,disable:c(a),...D("y+",{onClick:()=>{r.value+=Ve}})})])])}};function At(t){const a={...o.value,day:t};if(e.range===!1){me(a,ce.value);return}if(m.value===null){const n=qe.value.find(f=>f.fill!==!0&&f.i===t);if(e.noUnset!==!0&&n.range!==void 0){nt({target:a,from:n.range.from,to:n.range.to});return}if(n.selected===!0){nt(a);return}const c=xe(a);m.value={init:a,initHash:c,final:a,finalHash:c},I("rangeStart",S(a))}else{const n=m.value.initHash,c=xe(a),f=n<=c?{from:m.value.init,to:a}:{from:a,to:m.value.init};m.value=null,at(n===c?a:{target:a,...f}),I("rangeEnd",{from:S(f.from),to:S(f.to)})}}function Et(t){if(m.value!==null){const a={...o.value,day:t};Object.assign(m.value,{final:a,finalHash:xe(a)})}}return Object.assign(Q,{setToday:Qe,setView:Le,offsetCalendar:Ue,setCalendarTo:De,setEditingRange:Se}),()=>{const t=[v("div",{class:"q-date__content col relative-position"},[v(Re,{name:"q-transition--fade"},Yt[x.value])])],a=st(A.default);return a!==void 0&&t.push(v("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&w(t,"push"),v("div",{class:s.value,...Fe.value},[Ot(),v("div",{ref:Y,class:"q-date__main col column",tabindex:-1},t)])}}});function ba(e,A){if(e.hour!==null){if(e.minute===null)return"minute";if(A===!0&&e.second===null)return"second"}return"hour"}function wa(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}var xa=Ge({name:"QTime",props:{...qt,...rt,...Ht,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:Tt,setup(e,{slots:A,emit:I}){const Q=pe(),{$q:b}=Q.proxy,V=Dt(e,b),{tabindex:D,headerClass:H,getLocale:L,getCurrentDate:R}=Ft(e,b),$=wt(e),O=xt($);let oe,w;const Y=X(null),N=h(()=>ie()),k=h(()=>L()),ve=h(()=>J()),G=Ne(e.modelValue,N.value,k.value,e.calendar,ve.value),g=X(ba(G)),o=X(G),x=X(G.hour===null||G.hour<12),ue=h(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(V.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),Z=h(()=>{const l=o.value;return{hour:l.hour===null?"--":p.value===!0?he(l.hour):String(x.value===!0?l.hour===0?12:l.hour:l.hour>12?l.hour-12:l.hour),minute:l.minute===null?"--":he(l.minute),second:l.second===null?"--":he(l.second)}}),p=h(()=>e.format24h!==null?e.format24h:b.lang.date.format24h),d=h(()=>{const l=g.value==="hour",i=l===!0?12:60,M=o.value[g.value];let W=`rotate(${Math.round(M*(360/i))-180}deg) translateX(-50%)`;return l===!0&&p.value===!0&&o.value.hour>=12&&(W+=" scale(.7)"),{transform:W}}),r=h(()=>o.value.hour!==null),m=h(()=>r.value===!0&&o.value.minute!==null),s=h(()=>e.hourOptions!==void 0?l=>e.hourOptions.includes(l):e.options!==void 0?l=>e.options(l,null,null):null),_=h(()=>e.minuteOptions!==void 0?l=>e.minuteOptions.includes(l):e.options!==void 0?l=>e.options(o.value.hour,l,null):null),C=h(()=>e.secondOptions!==void 0?l=>e.secondOptions.includes(l):e.options!==void 0?l=>e.options(o.value.hour,o.value.minute,l):null),E=h(()=>{if(s.value===null)return null;const l=u(0,11,s.value),i=u(12,11,s.value);return{am:l,pm:i,values:l.values.concat(i.values)}}),T=h(()=>_.value!==null?u(0,59,_.value):null),q=h(()=>C.value!==null?u(0,59,C.value):null),ne=h(()=>{switch(g.value){case"hour":return E.value;case"minute":return T.value;case"second":return q.value}}),re=h(()=>{let l,i,M=0,j=1;const W=ne.value!==null?ne.value.values:void 0;g.value==="hour"?p.value===!0?(l=0,i=23):(l=0,i=11,x.value===!1&&(M=12)):(l=0,i=55,j=5);const me=[];for(let S=l,ee=l;S<=i;S+=j,ee++){const ke=S+M,Ye=W!==void 0&&W.includes(ke)===!1,We=g.value==="hour"&&S===0?p.value===!0?"00":"12":S;me.push({val:ke,index:ee,disable:Ye,label:We})}return me}),B=h(()=>[[ua,ye,void 0,{stop:!0,prevent:!0,mouse:!0}]]);de(()=>e.modelValue,l=>{const i=Ne(l,N.value,k.value,e.calendar,ve.value);(i.dateHash!==o.value.dateHash||i.timeHash!==o.value.timeHash)&&(o.value=i,i.hour===null?g.value="hour":x.value=i.hour<12)}),de([N,k],()=>{Me(()=>{Oe()})});function K(){const l={...R(),...wa()};Oe(l),Object.assign(o.value,l),g.value="hour"}function u(l,i,M){const j=Array.apply(null,{length:i+1}).map((W,me)=>{const S=me+l;return{index:S,val:M(S)===!0}}).filter(W=>W.val===!0).map(W=>W.index);return{min:j[0],max:j[j.length-1],values:j,threshold:i+1}}function z(l,i,M){const j=Math.abs(l-i);return Math.min(j,M-j)}function se(l,{min:i,max:M,values:j,threshold:W}){if(l===i)return i;if(l<i||l>M)return z(l,i,W)<=z(l,M,W)?i:M;const me=j.findIndex(ke=>l<=ke),S=j[me-1],ee=j[me];return l-S<=ee-l?S:ee}function ie(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function J(){if(typeof e.defaultDate!="string"){const l=R(!0);return l.dateHash=xe(l),l}return Ne(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function fe(){return Ct(Q)===!0||ne.value!==null&&(ne.value.values.length===0||g.value==="hour"&&p.value!==!0&&E.value[x.value===!0?"am":"pm"].values.length===0)}function Ie(){const l=Y.value,{top:i,left:M,width:j}=l.getBoundingClientRect(),W=j/2;return{top:i+W,left:M+W,dist:W*.7}}function ye(l){if(fe()!==!0){if(l.isFirst===!0){oe=Ie(),w=te(l.evt,oe);return}w=te(l.evt,oe,w),l.isFinal===!0&&(oe=!1,w=null,Ke())}}function Ke(){g.value==="hour"?g.value="minute":e.withSeconds&&g.value==="minute"&&(g.value="second")}function te(l,i,M){const j=Ut(l),W=Math.abs(j.top-i.top),me=Math.sqrt(Math.pow(Math.abs(j.top-i.top),2)+Math.pow(Math.abs(j.left-i.left),2));let S,ee=Math.asin(W/me)*(180/Math.PI);if(j.top<i.top?ee=i.left<j.left?90-ee:270+ee:ee=i.left<j.left?ee+90:270-ee,g.value==="hour"){if(S=ee/30,E.value!==null){const ke=p.value!==!0?x.value===!0:E.value.am.values.length!==0&&E.value.pm.values.length!==0?me>=i.dist:E.value.am.values.length!==0;S=se(S+(ke===!0?0:12),E.value[ke===!0?"am":"pm"])}else S=Math.round(S),p.value===!0?me<i.dist?S<12&&(S+=12):S===12&&(S=0):x.value===!0&&S===12?S=0:x.value===!1&&S!==12&&(S+=12);p.value===!0&&(x.value=S<12)}else S=Math.round(ee/6)%60,g.value==="minute"&&T.value!==null?S=se(S,T.value):g.value==="second"&&q.value!==null&&(S=se(S,q.value));return M!==S&&Qe[g.value](S),S}const le={hour(){g.value="hour"},minute(){g.value="minute"},second(){g.value="second"}};function Be(l){l.keyCode===13&&Le()}function He(l){l.keyCode===13&&Ue()}function ze(l){fe()!==!0&&(b.platform.is.desktop!==!0&&te(l,Ie()),Ke())}function Ce(l){fe()!==!0&&te(l,Ie())}function ce(l){if(l.keyCode===13)g.value="hour";else if([37,39].includes(l.keyCode)){const i=l.keyCode===37?-1:1;if(E.value!==null){const M=p.value===!0?E.value.values:E.value[x.value===!0?"am":"pm"].values;if(M.length===0)return;if(o.value.hour===null)Te(M[0]);else{const j=(M.length+M.indexOf(o.value.hour)+i)%M.length;Te(M[j])}}else{const M=p.value===!0?24:12,j=p.value!==!0&&x.value===!1?12:0,W=o.value.hour===null?-i:o.value.hour;Te(j+(24+W+i)%M)}}}function et(l){if(l.keyCode===13)g.value="minute";else if([37,39].includes(l.keyCode)){const i=l.keyCode===37?-1:1;if(T.value!==null){const M=T.value.values;if(M.length===0)return;if(o.value.minute===null)qe(M[0]);else{const j=(M.length+M.indexOf(o.value.minute)+i)%M.length;qe(M[j])}}else{const M=o.value.minute===null?-i:o.value.minute;qe((60+M+i)%60)}}}function tt(l){if(l.keyCode===13)g.value="second";else if([37,39].includes(l.keyCode)){const i=l.keyCode===37?-1:1;if(q.value!==null){const M=q.value.values;if(M.length===0)return;if(o.value.seconds===null)Fe(M[0]);else{const j=(M.length+M.indexOf(o.value.second)+i)%M.length;Fe(M[j])}}else{const M=o.value.second===null?-i:o.value.second;Fe((60+M+i)%60)}}}function Te(l){o.value.hour!==l&&(o.value.hour=l,Se())}function qe(l){o.value.minute!==l&&(o.value.minute=l,Se())}function Fe(l){o.value.second!==l&&(o.value.second=l,Se())}const Qe={hour:Te,minute:qe,second:Fe};function Le(){x.value===!1&&(x.value=!0,o.value.hour!==null&&(o.value.hour-=12,Se()))}function Ue(){x.value===!0&&(x.value=!1,o.value.hour!==null&&(o.value.hour+=12,Se()))}function De(l){const i=e.modelValue;g.value!==l&&i!==void 0&&i!==null&&i!==""&&typeof i!="string"&&(g.value=l)}function Se(){if(s.value!==null&&s.value(o.value.hour)!==!0){o.value=Ne(),De("hour");return}if(_.value!==null&&_.value(o.value.minute)!==!0){o.value.minute=null,o.value.second=null,De("minute");return}if(e.withSeconds===!0&&C.value!==null&&C.value(o.value.second)!==!0){o.value.second=null,De("second");return}o.value.hour===null||o.value.minute===null||e.withSeconds===!0&&o.value.second===null||Oe()}function Oe(l){const i=Object.assign({...o.value},l),M=e.calendar==="persian"?he(i.hour)+":"+he(i.minute)+(e.withSeconds===!0?":"+he(i.second):""):St(new Date(i.year,i.month===null?null:i.month-1,i.day,i.hour,i.minute,i.second,i.millisecond),N.value,k.value,i.year,i.timezoneOffset);i.changed=M!==e.modelValue,I("update:modelValue",M,i)}function Pe(){const l=[v("div",{class:"q-time__link "+(g.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:D.value,onClick:le.hour,onKeyup:ce},Z.value.hour),v("div",":"),v("div",r.value===!0?{class:"q-time__link "+(g.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:D.value,onKeyup:et,onClick:le.minute}:{class:"q-time__link"},Z.value.minute)];e.withSeconds===!0&&l.push(v("div",":"),v("div",m.value===!0?{class:"q-time__link "+(g.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:D.value,onKeyup:tt,onClick:le.second}:{class:"q-time__link"},Z.value.second));const i=[v("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},l)];return p.value===!1&&i.push(v("div",{class:"q-time__header-ampm column items-between no-wrap"},[v("div",{class:"q-time__link "+(x.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:D.value,onClick:Le,onKeyup:Be},"AM"),v("div",{class:"q-time__link "+(x.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:D.value,onClick:Ue,onKeyup:He},"PM")])),v("div",{class:"q-time__header flex flex-center no-wrap "+H.value},i)}function Ze(){const l=o.value[g.value];return v("div",{class:"q-time__content col relative-position"},[v(Re,{name:"q-transition--scale"},()=>v("div",{key:"clock"+g.value,class:"q-time__container-parent absolute-full"},[v("div",{ref:Y,class:"q-time__container-child fit overflow-hidden"},[Zt(v("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:ze,onMousedown:Ce},[v("div",{class:"q-time__clock-circle fit"},[v("div",{class:"q-time__clock-pointer"+(o.value[g.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:d.value}),re.value.map(i=>v("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${i.index}`+(i.val===l?" q-time__clock-position--active "+H.value:i.disable===!0?" q-time__clock-position--disable":"")},[v("span",i.label)]))])]),B.value)])])),e.nowBtn===!0?v(ge,{class:"q-time__now-button absolute",icon:b.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:D.value,onClick:K}):null])}return Q.proxy.setNow=K,()=>{const l=[Ze()],i=st(A.default);return i!==void 0&&l.push(v("div",{class:"q-time__actions"},i)),e.name!==void 0&&e.disable!==!0&&O(l,"push"),v("div",{class:ue.value,tabindex:-1},[Pe(),v("div",{class:"q-time__main col overflow-auto"},l)])}}}),_a=Ge({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:A,emit:I}){const Q=pe(),b=X(null);let V=0;const D=[];function H(w){const Y=typeof w=="boolean"?w:e.noErrorFocus!==!0,N=++V,k=(g,o)=>{I("validation"+(g===!0?"Success":"Error"),o)},ve=g=>{const o=g.validate();return typeof o.then=="function"?o.then(x=>({valid:x,comp:g}),x=>({valid:!1,comp:g,err:x})):Promise.resolve({valid:o,comp:g})};return(e.greedy===!0?Promise.all(D.map(ve)).then(g=>g.filter(o=>o.valid!==!0)):D.reduce((g,o)=>g.then(()=>ve(o).then(x=>{if(x.valid===!1)return Promise.reject(x)})),Promise.resolve()).catch(g=>[g])).then(g=>{if(g===void 0||g.length===0)return N===V&&k(!0),!0;if(N===V){const{comp:o,err:x}=g[0];if(x!==void 0&&console.error(x),k(!1,o),Y===!0){const ue=g.find(({comp:Z})=>typeof Z.focus=="function"&&Ct(Z.$)===!1);ue!==void 0&&ue.comp.focus()}}return!1})}function L(){V++,D.forEach(w=>{typeof w.resetValidation=="function"&&w.resetValidation()})}function R(w){w!==void 0&&mt(w);const Y=V+1;H().then(N=>{Y===V&&N===!0&&(e.onSubmit!==void 0?I("submit",w):w!==void 0&&w.target!==void 0&&typeof w.target.submit=="function"&&w.target.submit())})}function $(w){w!==void 0&&mt(w),I("reset"),Me(()=>{L(),e.autofocus===!0&&e.noResetFocus!==!0&&O()})}function O(){bt(()=>{if(b.value===null)return;const w=b.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||b.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||b.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(b.value.querySelectorAll("[tabindex]"),Y=>Y.tabIndex!==-1);w!=null&&w.focus({preventScroll:!0})})}Wt(Gt,{bindComponent(w){D.push(w)},unbindComponent(w){const Y=D.indexOf(w);Y!==-1&&D.splice(Y,1)}});let oe=!1;return Jt(()=>{oe=!0}),Xt(()=>{oe===!0&&e.autofocus===!0&&O()}),_t(()=>{e.autofocus===!0&&O()}),Object.assign(Q.proxy,{validate:H,resetValidation:L,submit:R,reset:$,focus:O,getValidationComponents:()=>D}),()=>v("form",{class:"q-form",ref:b,onSubmit:R,onReset:$},st(A.default))}});const Ca={class:"page-container"},qa=be("h2",{class:"text-center"},"New Travel",-1),Da=be("h5",{class:"subtitle text-center"},"Add a new travel",-1),Sa=be("br",null,null,-1),Va=be("p",null,[je("To add a new travel, simply provide details regarding the "),be("b",null,"travel method"),je(" and the "),be("b",null,"distance traveled"),je(". This information will enable us to accurately calculate the associated emissions and provide you with a comprehensive overview of your environmental impact. ")],-1),Ha=be("br",null,null,-1),Ta={key:0,class:"q-gutter-md row items-start"},$a={__name:"NewTravel",setup(e){const A=ra(),I=X([]),{onResult:Q,onError:b}=sa(vt(`
  query {
    travelMethods
  }
`));Q(w=>{w.loading||(I.value=w.data.travelMethods.map(Y=>Y.replace("_"," ")))});const V=X(""),D=X(null),H=X(!0),L=X(Je.formatDate(Date.now(),"YYYY-MM-DD HH:mm")),{mutate:R,onError:$}=da(vt(`
    mutation addTravel ($method: TravelMethod!, $distance: Float, $datetime: DateTime) {
      addTravel(method: $method, distance: $distance, datetime: $datetime) {
          distance,
          unitEmission,
          emission
      }
    }
  `));function O(){const w=H.value?Je.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ssZ"):Je.formatDate(Je.extractDate(L.value,"YYYY-MM-DD HH:mm"),"YYYY-MM-DD HH:mm:ssZ");let Y=R({method:V.value.replace(" ","_"),distance:D.value,datetime:w.replace(" ","T")});const N=A.notify({spinner:!0,message:"Please wait...",timeout:2e3});Y.then(k=>{N();const ve=Math.floor(k.data.addTravel.emission*1e3);A.notify({message:"Travel successfully added! You emitted "+ve+"g of Co2",color:"green"}),oe()})}function oe(){V.value=null,D.value=null,H.value=!0}return(w,Y)=>{const N=pt("router-link");return ht(),ea(ia,{class:"q-pa-sm"},{default:ot(()=>[be("div",Ca,[qa,Da,Sa,Va,be("p",null,[je("To get an overview of how we calculate the associated emissions, please visit our "),we(N,{to:"/help"},{default:ot(()=>[je("help page")]),_:1}),je(". ")]),Ha,we(_a,{onSubmit:O,onReset:oe,class:"q-gutter-md"},{default:ot(()=>[we(Nt,{modelValue:V.value,"onUpdate:modelValue":Y[0]||(Y[0]=k=>V.value=k),options:I.value,label:"Travel Method*"},null,8,["modelValue","options"]),we(ha,{filled:"",type:"number",modelValue:D.value,"onUpdate:modelValue":Y[1]||(Y[1]=k=>D.value=k),label:"Distance Travelled (km)*","lazy-rules":"",rules:[k=>k!==null&&k!==""||"Please type the distance travelled",k=>k>0||"Please type a real distance"]},null,8,["modelValue","rules"]),we(na,{modelValue:H.value,"onUpdate:modelValue":Y[2]||(Y[2]=k=>H.value=k),label:"Now"},null,8,["modelValue"]),H.value?aa("",!0):(ht(),ta("div",Ta,[we(Ma,{modelValue:L.value,"onUpdate:modelValue":Y[3]||(Y[3]=k=>L.value=k),mask:"YYYY-MM-DD HH:mm",color:"primary"},null,8,["modelValue"]),we(xa,{modelValue:L.value,"onUpdate:modelValue":Y[4]||(Y[4]=k=>L.value=k),mask:"YYYY-MM-DD HH:mm",color:"primary"},null,8,["modelValue"])])),be("div",null,[we(ge,{label:"Submit",type:"submit",color:"primary"}),we(ge,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])]),_:1})])]),_:1})}}};export{$a as default};
